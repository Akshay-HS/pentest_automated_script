import subprocess

# Prompt the user for the IP address (RHOST)
ip_address = input("Enter RHOST: ")

# Construct the nmap command with the provided IP address
nmap_command = f"nmap -sCV -oN nmap.log {ip_address}"

# Run the nmap command
nmap_result = subprocess.run(nmap_command, shell=True, stdout=subprocess.PIPE, stderr=subprocess.PIPE, text=True)

# Print the nmap command's output
print("nmap Output:")
print(nmap_result.stdout)

# Check if port 80 is found in the nmap output
if "80/tcp" in nmap_result.stdout:
    print("Port 80 found, running gobuster...")
    
    # Construct the gobuster command with the provided IP address
    gobuster_command = f"gobuster dir -u http://{ip_address} -w /usr/share/dirb/wordlists/common.txt -o gobuster.log"
    
    # Run the gobuster command
    gobuster_result = subprocess.run(gobuster_command, shell=True, stdout=subprocess.PIPE, stderr=subprocess.PIPE, text=True)
    
    # Print the gobuster command's output
    print("gobuster Output:")
    print(gobuster_result.stdout)
else:
    print("Port 80 not found, skipping gobuster.")

# Print any error if it occurred during nmap or gobuster execution
if nmap_result.stderr:
    print("nmap Error:")
    print(nmap_result.stderr)
if "gobuster_result" in locals() and gobuster_result.stderr:  # Check if gobuster_result is defined
    print("gobuster Error:")
    print(gobuster_result.stderr)
